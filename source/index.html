<title>Minimal Toolkit</title>
<style>
  * { box-sizing:border-box; font-family: sans-serif; }
  nav { display:flex; justify-content: flex-end; }
  nav h1 { padding:0 1em; flex: 2 auto; }
  nav button {
    padding:1em;
    border:0px;
    color:#FFF;
    text-transform:capitalize;
    background: #0B6EC0;
    outline:transparent;
  }
  nav button:first-of-type { border-radius: 2em 0 0 2em; }
  nav button:last-of-type { border-radius: 0 2em 2em 0; }
  nav button:hover { background: linear-gradient(to bottom, #2C82C9 0%,#0B6EC0 100%); }
  nav button.active {
    background: #C00B0B;
    background: #ddd;
    color:#111;
  }
  #tools {
    display:flex;
    align-items: flex-start;
    align-content: space-around;
    margin:1em;
  }
  form {
    flex-grow: 1;
    display:none;
    margin:auto;
    max-width:50%;
    max-height:50%;
    padding:1em;
    background:#ddd;
    border-radius:2em;
  }
  form button, form input, form textarea {
    display:block;
    width:90%;
    margin:0.5em auto;
    padding:0.5em;
  }
  textarea { resize:vertical; }
  #untiny a { display:block; margin:0.5em }
</style>
<nav>
  <h1>Minimal Toolkit</h1>
  <button name="untiny" class="active">Unshorten URL</button>
  <button name="de-encoder">URI En/Decode</button>
  <button name="rand-color">Random Color</button>
  <button name="lightdark-color">Lighten/Darken Color</button>
  <button name="commatabs">Commas to Tabs</button>
  <button name="tabcommas">Tabs to Commas</button>
  <button name="escape_rex">Escape JS Regex</button>
</nav>
<div id="tools">
  <!--
   __  __           __               __
  / / / /___  _____/ /_  ____  _____/ /____  ____
 / / / / __ \/ ___/ __ \/ __ \/ ___/ __/ _ \/ __ \
/ /_/ / / / (__  ) / / / /_/ / /  / /_/  __/ / / /
\____/_/ /_/____/_/ /_/\____/_/   \__/\___/_/ /_/

  -->

  <form id="untiny" action="/untiny" method="GET" style="display:block">
    <input id="untiny-url"  name="url" />
    <button>Unshorten URL</button>
  </form>
  <script>
    document.getElementById('untiny').onsubmit = function (e) {
      e.preventDefault;
      /* this is the only function on this page with a 'backend' */
      var r = new XMLHttpRequest(),
        url = document.getElementById('untiny-url').value;
      r.open("GET", "/untiny?url="+url, true);
      r.onreadystatechange = function () {
        if (r.readyState != 4 || r.status != 200) return;
        var link = document.createElement('a');
        link.href = r.responseText;
        link.innerHTML = r.responseText;
        document.getElementById('untiny').appendChild(link);
      };
      r.send(null);
      return false;
    }
  </script>


  <!--
    ______      ____                      __
   / ____/___  / __ \___  _________  ____/ /__  _____
  / __/ / __ \/ / / / _ \/ ___/ __ \/ __  / _ \/ ___/
 / /___/ / / / /_/ /  __/ /__/ /_/ / /_/ /  __/ /
/_____/_/ /_/_____/\___/\___/\____/\__,_/\___/_/
  -->
  <form id="de-encoder">
    <input id="codec" />
    <button id="codec_btn">URI (en|de)code</button>
  </form>
  <script>
    var codec = document.getElementById('codec');
    document.getElementById('de-encoder').onsubmit = function(e){
      e.preventDefault();
      var val = codec.value;
      if(val.indexOf('%')>0){
        codec.value = decodeURIComponent(val);
      }else{
        codec.value = encodeURIComponent(val);
      }
      return false;
    }
  </script>


  <!--
    ____                  __                   ______      __
   / __ \____ _____  ____/ /___  ____ ___     / ____/___  / /___  _____
  / /_/ / __ `/ __ \/ __  / __ \/ __ `__ \   / /   / __ \/ / __ \/ ___/
 / _, _/ /_/ / / / / /_/ / /_/ / / / / / /  / /___/ /_/ / / /_/ / /
/_/ |_|\__,_/_/ /_/\__,_/\____/_/ /_/ /_/   \____/\____/_/\____/_/
  -->
  <form id="rand-color">
    <button id="rand-color_btn">random color</button>
  </form>
  <script>
    var randcolor = document.getElementById('rand-color');
    randcolor.onsubmit = function(e){
      e.preventDefault();
      var color = Math.floor(Math.random()*16777216).toString(16),
        title = document.createElement('h1'),
        first = document.querySelector('#rand-color h1');
      title.innerHTML = '#'+color;
      title.style.backgroundColor = '#'+color;
      title.style.border = "1px solid black";
      title.style.textAlign = "center";
      if(first){
        randcolor.removeChild(first);
      }
      randcolor.appendChild(title);
      return false;
    }
  </script>


	<!--


    __    _       __    __     ______             __
   / /   (_)___ _/ /_  / /_  _/_/ __ \____ ______/ /__
  / /   / / __ `/ __ \/ __/_/_// / / / __ `/ ___/ //_/
 / /___/ / /_/ / / / / /__/_/ / /_/ / /_/ / /  / ,<
/_____/_/\__, /_/ /_/\__/_/  /_____/\__,_/_/  /_/|_|
        /____/
   ______      __
  / ____/___  / /___  _____
 / /   / __ \/ / __ \/ ___/
/ /___/ /_/ / / /_/ / /
\____/\____/_/\____/_/


	-->
	<form id="lightdark-color">
					<label>color <input id="ldcolor"></label>
					<label>amount <input id="ldamt"></label>
					<button type="submit">Lighten/Darken Color</button>
	</form>
	<script>
					var ldcolor = document.getElementById('lightdark-color');
					ldcolor.onsubmit = function(e) {
									e.preventDefault();

									var usePound = false,
        col = document.querySelector('input#ldcolor').value,
        amt = document.querySelector('input#ldamt').value,
        title = document.createElement('h1'),
        first = document.querySelector('#lightdark-color h1');

    if (col[0] == "#") {
        col = col.slice(1);
        usePound = true;
    }

    var num = parseInt(col,16);

    var r = (num >> 16) + amt;

    if (r > 255) r = 255;
    else if  (r < 0) r = 0;

    var b = ((num >> 8) & 0x00FF) + amt;

    if (b > 255) b = 255;
    else if  (b < 0) b = 0;

    var g = (num & 0x0000FF) + amt;

    if (g > 255) g = 255;
    else if (g < 0) g = 0;

    var color = (g | (b << 8) | (r << 16)).toString(16);

      title.innerHTML = (usePound?"#":"") + color;
      title.style.backgroundColor = "#" + color;
      title.style.border = "1px solid black";
      title.style.textAlign = "center";
      if(first){
        ldcolor.removeChild(first);
      }
      ldcolor.appendChild(title);
      return false;
					};
	</script>






  <!--
   ______                                        __
  / ____/___  ____ ___  ____ ___  ____ ______   / /_____
 / /   / __ \/ __ `__ \/ __ `__ \/ __ `/ ___/  / __/ __ \
/ /___/ /_/ / / / / / / / / / / / /_/ (__  )  / /_/ /_/ /
\____/\____/_/ /_/ /_/_/ /_/ /_/\__,_/____/   \__/\____/

  ______      __
 /_  __/___ _/ /_  _____
  / / / __ `/ __ \/ ___/
 / / / /_/ / /_/ (__  )
/_/  \__,_/_.___/____/

  -->
  <form id="commatabs">
    <textarea id="commatabber"></textarea>
    <button id="execute">Convert Commas to Tabs</button>
  </form>
  <script>
    document.getElementById('commatabs').onsubmit = function(e) {
      e.preventDefault();
      var ct = document.getElementById('commatabber');
      var text = ct.value;
      ct.value = text.replace(/,/g, '       ');
      return false;
    }
  </script>


  <!--
  ______      __            __
 /_  __/___ _/ /_  _____   / /_____
  / / / __ `/ __ \/ ___/  / __/ __ \
 / / / /_/ / /_/ (__  )  / /_/ /_/ /
/_/  \__,_/_.___/____/   \__/\____/

   ______
  / ____/___  ____ ___  ____ ___  ____ ______
 / /   / __ \/ __ `__ \/ __ `__ \/ __ `/ ___/
/ /___/ /_/ / / / / / / / / / / / /_/ (__  )
\____/\____/_/ /_/ /_/_/ /_/ /_/\__,_/____/

  -->
  <form id="tabcommas">
    <textarea id="tabcommer"></textarea>
    <button id="execute">Convert Tabs to Commas</button>
  </form>
  <script>
    document.getElementById('tabcommas').onsubmit = function(e) {
      e.preventDefault();
      var ct = document.getElementById('tabcommer');
      var text = ct.value;
      ct.value = text.replace(/\t/g, ',');
      return false;
    }
  </script>


  <!--
    ______                              ____
   / ____/_____________ _____  ___     / __ \___  ____ ____  _  __
  / __/ / ___/ ___/ __ `/ __ \/ _ \   / /_/ / _ \/ __ `/ _ \| |/_/
 / /___(__  ) /__/ /_/ / /_/ /  __/  / _, _/  __/ /_/ /  __/>  <
/_____/____/\___/\__,_/ .___/\___/  /_/ |_|\___/\__, /\___/_/|_|
                     /_/                       /____/
  -->
  <form id="escape_rex">
    <input id="escape_regex" />
    <button id="execute">Escape JS Regex</button>
  </form>
  <script>
    document.getElementById('escape_rex').onsubmit = function(e) {
      e.preventDefault();
      var ct = document.getElementById('escape_regex');
      ct.value = ct.value.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
      return false;
    }
  </script>
</div>


<!--
    _   _____ _    __
   / | / /   | |  / /
  /  |/ / /| | | / /
 / /|  / ___ | |/ /
/_/ |_/_/  |_|___/
-->
<script>
  var $ = function(el, callback) {
    [].forEach.call(document.querySelectorAll(el), callback);
  }
  $('nav button', function(button){
    button.addEventListener('click', function(e) {
      e.preventDefault;
      $('form', function (form) { form.style.display = "none"; });
      $('nav button', function (nav) { nav.className=""; });
      e.target.className="active";
      document.querySelector('#' + e.target.name).style.display = 'block';
    });
  });
</script>
